"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[485],{9485:(w,g,u)=>{u.r(g),u.d(g,{IssuesModule:()=>J});var l=u(6895),i=u(7269),_=u(1334),r=u(433),d=u(646),t=u(1571),m=u(7253);let b=(()=>{class o{constructor(e,n,c){this.route=e,this.issue=n,this.router=c,this.return_date=""}ngOnInit(){this.id=this.route.snapshot.params.id,this.onStart()}onStart(){this.issue.getIssue(this.id).subscribe({next:e=>{console.log(e),this.due_date=e.due_date},error:e=>{console.log(e)}})}onSubmit(e){this.updateinfo=e.form.value,this.updateinfo.due_date=this.due_date,console.log(this.updateinfo),this.issue.editIssue(this.id,this.updateinfo).subscribe({next:n=>{console.log(n),this.router.navigate(["/issues/issuebooks"])},error:n=>{console.log(n)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(m.c),t.Y36(d.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-updateissue"]],decls:11,vars:1,consts:[["xs","12"],[1,"mb-4"],["cForm","",3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["cLabel","","for","exampleFormControlInput1"],["type","date","cFormControl","","id","return_date","name","return_date",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-success"]],template:function(e,n){if(1&e){const c=t.EpF();t.TgZ(0,"c-col",0)(1,"c-card",1)(2,"c-card-body")(3,"form",2,3),t.NdJ("ngSubmit",function(){t.CHM(c);const a=t.MAs(4);return t.KtG(n.onSubmit(a))}),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Return date"),t.qZA(),t.TgZ(8,"input",6),t.NdJ("ngModelChange",function(a){return n.return_date=a}),t.qZA()(),t.TgZ(9,"button",7),t._uU(10,"Submit"),t.qZA()()()()()}2&e&&(t.xp6(8),t.Q6J("ngModel",n.return_date))},dependencies:[i.AkF,i.yue,i.Yp0,i.$_X,i.oHf,i.eFW,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F],styles:["body[_ngcontent-%COMP%]{color:#000;overflow-x:hidden;height:100%;background-color:#ce93d8!important;background-repeat:no-repeat}.container-fluid[_ngcontent-%COMP%]{padding-top:120px;padding-bottom:120px}input[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid lightgrey!important;border-radius:6px!important;box-sizing:border-box;background-color:#fff!important;color:#2c3e50;font-size:14px;letter-spacing:1px}input[_ngcontent-%COMP%]:focus{box-shadow:none!important;border:1px solid #512da8;outline-width:0}[_ngcontent-%COMP%]::placeholder{color:#bdbdbd;opacity:1}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#bdbdbd}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#bdbdbd}button[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline-width:0}.datepicker[_ngcontent-%COMP%]{background-color:#fff;border:none}.datepicker-dropdown[_ngcontent-%COMP%]{top:0;left:0}.datepicker[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.today[_ngcontent-%COMP%], span.focused[_ngcontent-%COMP%]{border-radius:50%!important}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2){background-color:#ff80ab!important}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(3)   th[_ngcontent-%COMP%]{color:#ff80ab!important;padding-top:20px;padding-bottom:10px}.dow[_ngcontent-%COMP%], .old-day[_ngcontent-%COMP%], .day[_ngcontent-%COMP%], .new-day[_ngcontent-%COMP%]{width:40px!important;height:40px!important;border-radius:0!important}.old-day[_ngcontent-%COMP%]:hover, .day[_ngcontent-%COMP%]:hover, .new-day[_ngcontent-%COMP%]:hover, .month[_ngcontent-%COMP%]:hover, .year[_ngcontent-%COMP%]:hover, .decade[_ngcontent-%COMP%]:hover, .century[_ngcontent-%COMP%]:hover{border-radius:50%!important;background-color:#eee}.active[_ngcontent-%COMP%]{border-radius:50%!important;background-image:linear-gradient(#90caf9,#64b5f6)!important;color:#fff!important}.prev[_ngcontent-%COMP%], .next[_ngcontent-%COMP%], .datepicker-switch[_ngcontent-%COMP%]{border-radius:0!important;padding:20px 10px!important;text-transform:uppercase;font-size:20px;color:#fff;opacity:.8}.prev[_ngcontent-%COMP%]:hover, .next[_ngcontent-%COMP%]:hover, .datepicker-switch[_ngcontent-%COMP%]:hover{background-color:inherit!important;opacity:1}"]}),o})();var f=u(8825);let h=(()=>{class o{constructor(e,n){this.issue=e,this.router=n}ngOnInit(){}onSubmit(e){console.log(e.form.value),this.addinfo=e.form.value,this.issue.addIssue(this.addinfo).subscribe({next:n=>{console.log(n),this.router.navigate(["/issues/issuebooks"])},error:n=>{console.log(n)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.o),t.Y36(d.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addissue"]],decls:21,vars:0,consts:[["cForm","",3,"ngSubmit"],["f","ngForm"],[1,"mb-3"],["cLabel","","for","exampleFormControlInput1"],["cFormControl","","id","book_id","ngModel","","name","book_id"],["cFormControl","","id","user_id","ngModel","","name","user_id"],["cFormControl","","id","issue_date","ngModel","","name","issue_date"],["cFormControl","","id","due_date","ngModel","","name","due_date"],[1,"d-grid","gap-2","col-1","mx-auto"],["type","submit",1,"btn","btn-success"]],template:function(e,n){if(1&e){const c=t.EpF();t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){t.CHM(c);const a=t.MAs(1);return t.KtG(n.onSubmit(a))}),t.TgZ(2,"div",2)(3,"label",3),t._uU(4,"Book Id"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2)(7,"label",3),t._uU(8,"User Id"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"div",2)(11,"label",3),t._uU(12,"Issue date"),t.qZA(),t._UZ(13,"input",6),t.qZA(),t.TgZ(14,"div",2)(15,"label",3),t._uU(16,"Due date"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.TgZ(18,"div",8)(19,"button",9),t._uU(20,"Submit"),t.qZA()()()}},dependencies:[i.$_X,i.oHf,i.eFW,r._Y,r.Fj,r.JJ,r.JL,r.On,r.F]}),o})();var Z=u(5968);function C(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.return_date)," ")}}function x(o,s){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.hij(" ",e.return_date," ")}}function k(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.no_of_days+" days"," ")}}function M(o,s){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.hij(" ",e.no_of_days," ")}}function A(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ","Rs."+e.fine_amount," ")}}function v(o,s){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.hij(" ",e.fine_amount," ")}}const I=function(o){return["/issues/updateissue",o]};function T(o,s){if(1&o&&(t.TgZ(0,"button",12),t._uU(1," Update "),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,I,e._id))}}function O(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,p=t.oxw();return t.KtG(p.deleteissue(c._id))}),t._uU(1," Delete "),t.qZA()}}function U(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td")(2,"div",4),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"div",4),t._uU(6),t.qZA()(),t.TgZ(7,"td")(8,"div",4),t._uU(9),t.ALo(10,"date"),t.qZA()(),t.TgZ(11,"td")(12,"div",4),t._uU(13),t.ALo(14,"date"),t.qZA()(),t.TgZ(15,"td",4),t.YNc(16,C,3,3,"div",8),t.YNc(17,x,1,1,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(19,"td")(20,"div",4),t._uU(21),t.qZA()(),t.TgZ(22,"td",4),t.YNc(23,k,2,1,"div",8),t.YNc(24,M,1,1,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(26,"td",4),t.YNc(27,A,2,1,"div",8),t.YNc(28,v,1,1,"ng-template",null,9,t.W1O),t.qZA(),t.TgZ(30,"td"),t.YNc(31,T,2,3,"button",10),t.qZA(),t.TgZ(32,"td"),t.YNc(33,O,2,0,"button",11),t.qZA()()),2&o){const e=s.$implicit,n=t.MAs(18),c=t.oxw();t.xp6(3),t.hij(" ",e.book_id.title," "),t.xp6(3),t.hij(" ",e.fullname," "),t.xp6(3),t.Oqu(t.lcZ(10,13,e.issue_date)),t.xp6(4),t.Oqu(t.lcZ(14,15,e.due_date)),t.xp6(3),t.Q6J("ngIf","nil"!=e.return_date)("ngIfElse",n),t.xp6(5),t.Oqu(e.status),t.xp6(2),t.Q6J("ngIf","nil"!==e.no_of_days)("ngIfElse",n),t.xp6(4),t.Q6J("ngIf","nil"!==e.fine_amount)("ngIfElse",n),t.xp6(4),t.Q6J("ngIf","librarian"==c.currentUserRole),t.xp6(2),t.Q6J("ngIf","librarian"==c.currentUserRole)}}const y=function(){return["/issues/addissue"]};function P(o,s){1&o&&(t.TgZ(0,"button",14),t._uU(1," Add "),t.qZA()),2&o&&t.Q6J("routerLink",t.DdM(1,y))}const q=[{path:"updateissue/:id",component:b},{path:"addissue",component:h},{path:"issuebooks",component:(()=>{class o{constructor(e){this.issueBooksService=e}ngOnInit(){this.getIssues(),this.currentUser=JSON.parse(localStorage.getItem("token")||"{}"),this.currentUserRole=this.currentUser.role}getIssues(){this.issueBooksService.getAllIssues().subscribe({next:e=>{for(let n in e)this.fullname=e[n].user_id.first_name+" "+e[n].user_id.last_name,e[n].fullname=this.fullname,console.log(e);this.issuebooks=e},error:e=>{console.log(e)}})}deleteissue(e){this.issueBooksService.deleteOneIssue(e).subscribe({next:n=>{console.log(n),this.getIssues()},error:n=>{console.log(n)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-issuebooks"]],decls:31,vars:2,consts:[["xs",""],[1,"mb-4"],[1,"table","table-striped"],[1,"table-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-grid","gap-2","col-1","mx-auto"],["type","button","class","btn btn-info",3,"routerLink",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseBlock",""],["type","button","class","btn btn-warning",3,"routerLink",4,"ngIf"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-info",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header"),t._uU(4,"IssueBooks"),t.qZA(),t.TgZ(5,"c-card-body")(6,"table",2)(7,"thead",3)(8,"tr")(9,"th",4),t._uU(10,"Book Title"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"User Name"),t.qZA(),t.TgZ(13,"th",4),t._uU(14,"Issue Date"),t.qZA(),t.TgZ(15,"th",4),t._uU(16,"Due Date"),t.qZA(),t.TgZ(17,"th",4),t._uU(18,"Return Date"),t.qZA(),t.TgZ(19,"th",4),t._uU(20,"Status"),t.qZA(),t.TgZ(21,"th",4),t._uU(22,"No of Days"),t.qZA(),t.TgZ(23,"th",4),t._uU(24,"Fine Amount"),t.qZA(),t._UZ(25,"th",4)(26,"th",4),t.qZA()(),t.TgZ(27,"tbody"),t.YNc(28,U,34,17,"tr",5),t.qZA()(),t.TgZ(29,"div",6),t.YNc(30,P,2,2,"button",7),t.qZA()()()()()),2&e&&(t.xp6(28),t.Q6J("ngForOf",n.issuebooks),t.xp6(2),t.Q6J("ngIf","librarian"==n.currentUserRole))},dependencies:[l.sg,l.O5,i.AkF,i.yue,i.nkx,i.iok,i.Yp0,d.rH,l.uU]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(q),d.Bz]}),o})(),J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,i.dTQ,i.hJ1,i.zE6,_.QX,i.ejP,F,r.UX,r.u5]}),o})()}}]);